$Id: HISTORY,v 1.4 1998/11/22 01:05:12 kluzz Exp $

- JanBot 3.08beta4 (24. Oct 1998) [DEVELOPER VERSION ONLY]

  * Added a new user level  called  "Superior Being".  This level exceeds
    level 2,  which was the former top nacho user level.   I decided that
    there where a  few commands that  should only be available  to people
    that have access to the machine on which the bot is running.   I also
    started using macros for the user levels,   instead of the hard coded
    numbers I've used so far. This leaves us with four levels:
    - Normal User:    0  (Very few commands, can't affect other users)
    - Power User:     1  (A bit more control over DCCs & online users)
    - Master User:    2  (Full user control, adding and removing users)
    - Superior Being: 3  (Full bot control, shutdown, config rehashing)
  * Changed my email address at the beginning of the README file. This is
    probably one of the most ground breaking changes in this release. ;)
  * Added three (3) new commands,  BYE,  EXIT and QUIT.   They all do the
    same, terminates the DCC Chat connection to the robot. Obviously this
    could be done using "/dcc close chat janbot" in the ircII client, but
    when users say "jump"...
  * And now, for the first time in JanBot's history: Aliases!   Yes, they
    are here, and they are here to stay.  After much wailing and gnashing
    of teeth, I finally got around to implementing nick aliases. There is
    a backside to the coin,  though;  An alias is unique among both other
    aliases and nicknames. That means that if KluZz wants to use KleWz as
    an alias, no other user may be registered as KleWz, and no other user
    may have KleWz as an alias.  Setting these constrains made it a whole
    lot easier to make it work. I don't think this will be a problem.
  * Extracted the CTCP handling routines into a separate file, to make it
    more flexible and extendible.
  * Made a workaround for a silly bug/feature in strncpy(), materializing
    as a problem with 9 character nicknames.   To my surprize,  strncpy()
    does not append an extra '\0' to the copied  string if it is equal or
    longer than 'n'.  But did the fucking Linux man  pages mention diddly
    about this? No, sir! I had to go to Solaris to find a description.
  * Made a quick fix to the userhost routines.  add_userhost() now checks
    to see if a mask already exists.  A future addition might be hostmask
    redundancy checking.
  * Changed the userlist file format. It should cut the file size down to
    40-50% of the original format.  NOTE:  It is important to convert the
    old userfile before running JanBot 3.08,  as it'll not understand the
    old file anymore. Use the userconv.pl perl script for this.
  * Added two new functions, check_idle_time() and remove_marked_chats(),
    just to break the huge check_chat() function into smaller pieces.
  * Rewrote parts of the DCC SEND code to gain more speed.  Seems like it
    worked very nicely. A DCCBlockSize of 8192 seems to give most speed.
  * Separated daemonizing  code into a  separate function, and changed it
    to use  "double forking"  in order  to lose  controlling  ttys and to
    become the process group leader.
  * Fixed the WHO command to display  only the number of days when a user
    is connected for more than 24 hours.
  * Wrote a command line parser  that handles  espace characters,  single
    and double quotes, spaces etc.
  * Rewrote parts of all the commands to make use of the new command line
    parser.
  * Fixed the headerfiles to use full prototyping.  Found som hidden bugs
    in the process. :)
  * Removed the globals.c file,  and distributed all the variables to the
    files where they belonged. It kinda makes sense to do this, I think.
  * Split the SEND command into SEND and SENDTO.  The SENDTO command will
    send files to a different nick,  while the SEND  command will send to
    the current nick.  This makes the bot act correctly if there's a file
    with the same name as the one you're trying to send to.  Also rewrote
    large  parts of the SENDTO command  (which is also called by the SEND
    command),  to make it  possible to use  full paths and  globbing when
    sending files. Curiously enough, that made the command smaller.
  * Added a global idle time variable  to keep track of the  overall idle
    time of the bot (not just the individual users). This will show up in
    the STATUS command and in a CTCP FINGER if Stealth Mode is engaged.
  * Ripped out all traces of Regex calls.  Using glob() and fnmatch() for
    all types of matching.  This also made it  possible to remove match.c
    that came with Eggdrop.
  * Fixed a small annoying bug in the userhost deletion routine that made
    the bot screw up the userhost list if the first entry was deleted.
  * Made FreeBSD's  crypt()  work properly.  It's pretty  sensitive about
    having all it's strings served to it 0-padded.
  * Started using GNU autoconf for configuring the bot.
  * Killed another file descriptor leakage.
  * Changed a lot of the  file handling code  to use fread/fwrite instead
    of read/write. Should reduce system load a bit, I think.
  * Added ETA to the SHOWDCC listing.
  * Did an enormous amount of source cleanup.
  * Rewrote the CD command completely, ending up with a way more flexible
    solution at 1/3 of the code size. If possible, the command also shows
    the amount of available space on the device on which the directory is
    located.
  * Added a "Stealth Mode",  which means that the bot will look just like
    any old ircII client when CTCP queried.  Makes it hardet to detect it
    as a bot.
  * Started using CVS for source code revision control. 
  * Fixed a bug that caused calculate_tarsize() to freak when a directory
    contained a link. Lesson: Don't use stat() when you mean lstat(). :)
  * Changed the licensing stuff to GNU Public License.
  * Fixed a bug in the 'CTCP IDENT' handling that caused the bot to crash
    when PublicAccess was enabled and no password was supplied.

- JanBot 3.07d (7. January 1998)

  * Minor fix to prevent the bot  from  jumping from server to server all
    the time.

- JanBot 3.07c (18. September 1997)

  * This release is just a stability patch release. Nothing's really new,
    thus only a minor change in the version number.  But it's recommended
    to upgrade anyway.

- JanBot 3.07b (31. March 1997)

  * Hunted down and killed a pretty fatal bug in the non blocking connect
    system.

- JanBot 3.07 (26. March 1997)

  * Fixed authenticate() and  parse_userhost_reply() to comply to the new
    irc2.9p1 server codes for 'I' and 'i' lines using different idents.
  * Improved the Makefile a bit. It will now automatically determine what
    system it's on, and select options based on that information. No more
    Makefile hacking needed.  Added a 'debug' target for compiling in the
    debugging code.
  * Added a SET switch called 'TAR'.  This will alter between sending tar
    files and recurse through the directory, sending all the files.
  * Added two new config switches (TightArsedSecurity & PublicAccess), to
    make security adjustments easier.
  * Separated the configuration parser code from janbot.c into a new file
    called config.c, to make things easier to work with.
  * Improved the SEND/GET command a bit,  so if the  first argument given
    if not an existing file, and does only contain valid nick characters,
    the rest of the files will be redirected to the specified nick.
  * Added a new command called REHASH, which rereads the config file. See
    the online help for the ups and downs of this command.
  * Rewrote large parts of config.c, to avoid having 400 lines of if-else
    statements in one function.  It now uses a search table just like the
    command parser.
  * Added function isvalidnick() to avoid illegal nicknames.
  * Added function purify_path() to remove redundant slashes from paths.
  * Added a signal handler for SIGHUP,  making it possible to use kill to
    rehash the config file ("kill -SIGHUP <pid>").  Technically this only
    invokes the REHASH command as if given through a DCC connection,  and
    it only works with the main process.
  * Added tilde expansion to certain tags in the configuration file. It's
    now possible to use  ~/blah or ~user/blah  instead of the entire path
    when specifying home dir, file dir, tar path and so on.
  * Displaying long "Message Of The Days" does no longer cause a SIGSEGV.
  * The DEL command no longer locks up the bot.
  * DCC GET connects are now non blocking,  which should improve the data
    flow a bit.   Setting up a new DCC GET connection no longer halts the
    other DCCs while waiting for the remote host to answer.
  * Added a configuration flag called DefaultFlags,  to make it easier to
    change the default flag settings for new users.
  * Although previously announced, the bot mirror system is not available
    in this version.  Due to unforseen  problems,  I have been forced to
    publish this release without it. Very sorry.

- JanBot 3.06 (6. November 1996)

  * The long awaited ratio system is finally in place,  hopefully with no
    disastrous bugs.  It is now possible to put restrictions on selfish & 
    eager leeches, thus forcing them to share, not only enjoy. If this is
    not a big problem,  it's possible to compile JanBot without the ratio
    system. Three new commands have arrived: ADJUST, DONATE and RATIO.
  * mIRC resume support now finally works again.   Although there seem to
    be some oddities when trying to resume far into large, auto generated 
    tar archives. I'll look into this later.
  * All future JanBot distributions  will be accompanied by an .lsm file,
    so the more popular ftp sites will accept it as a contribution.
  * JanBot has now been successfully ported to BSDi and Solaris.

- JanBot 3.05 (3. November 1996)

  * The bot will again fork()  and write() the userlist.  No more lagging
    while storing the user profiles.  And no more zombies.  Seems like my
    schedule was loose enough, afterall.

- JanBot 3.04 (2. November 1996)

  * Fixed a silly zombie problem related to the writing of the userlists.
    Unfortunately,  this means that the bot  will hang while  the list is 
    written.  This will be fixed some time in the future,  but I am on an
    extremely tight schedule.

- JanBot 3.03 (8. October 1996)

  * No new release without a quick bugfix revision. JanBot does no longer
    lag incredibly much  as a result of  changing to ascii user profiles.
    It now stores the user profiles at certain time intervals,  and there
    are no longer any noticable delays when this is done.
  * Added a config tag called ScheduledWrite, where the interval for user
    list writing can be specified. The interval is in seconds.
  * Fixed a tiny little bug in the check_dccqueue() function. It will now
    report back the correct number of files in the dcc queue. The bug did
    appear when files where  put in the queue,  and the user switched the
    autosend flag on.
  * As a little bonus for changing to an ascii userfile, unlimited number
    of hostmasks can me registered.
  * Due to unforseen events,  the old match.c from the Eggdrop bot had to
    reimplemented.  JanBot now temporarily utilizes the matching routines
    in that file. Read the source for copyright notices etc.

- JanBot 3.02 (6. October 1996)

  * Rewrote large parts of  userlist.c and some  other files to implement
    an ascii userfile, instead of raw memory copies.  This makes it a lot
    easier to move userfiles between  different architectures.  I guess I
    pushed userfile encryption further into the future by doing this.

- JanBot 3.02beta1 (5. October 1996)

  * Man, it's hard to track down bugs when you haven't looked at the code
    for 3 months.  This release has a new hyperdcc technique, which seems
    to work even better than the  previous ones.  It now makes more sense
    that a big DCC buffer equals mucho speed.
  * The MiRC resume routines still needs more testing.
  * Did I mention that I can now diasssemble an AG-3 battle rifle in less
    than 30 seconds?

- JanBot 3.01 (7. June 1996)

  * Fixed a blocking socket problem, thus improving the reaction time and
    the tranfer rates.
  * Changed the default DCC Block Size to 4096, which is more reasonable.
    
- JanBot 3.0 (6. June 1996)

  * First release of the C bot. I know there are bugs, but they're rare &
    hard to reproduce.  For those  wondering about  the version number of
    this release; there has been 2 versions of JanBot earlier,  both were
    written in the ircII scripting language.
